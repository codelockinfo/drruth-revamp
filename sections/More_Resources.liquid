<div class="amr_more_resources amr_dots_arrows" style="background-color:{{ section.settings.bg_color }};">
  <div class="amr_container_1170" style="background-color:{{ section.settings.slide_bg_color }};">
    <div class="amr_pet_consultants_header">
      {% if section.settings.heading != blank %}<h2>{{ section.settings.heading }}</h2>{% endif %}
      {% if section.settings.desc != blank %}<div>{{ section.settings.desc }}</div>{% endif %}
      <div class="amr_PD_btn_grup">
        {% if section.settings.btn_txt != blank %}<a href="{{ section.settings.btn_url }}">{{ section.settings.btn_txt }}</a>{% endif %}
        {% if section.settings.btn_txt2 != blank %}<a href="{{ section.settings.btn_url2 }}">{{ section.settings.btn_txt2 }}</a>{% endif %}
      </div>
    </div>
    
      <!-- <div class="amr_MR_images">
        {% for block in section.blocks %}
          <div class="amr_MR_img">
            <img src="{{ block.settings.main_img | img_url:'master' }}">
          </div>
        {% endfor %}
      </div> -->

    <div class="aa_slider">
      <img src="https://placehold.jp/480x270.png">
      <img src="https://placehold.jp/480x270.png">
      <img src="https://placehold.jp/480x270.png">
      <img class="active" src="https://placehold.jp/480x270.png">
      <img src="https://placehold.jp/480x270.png">
      <img src="https://placehold.jp/480x270.png">
      <img src="https://placehold.jp/480x270.png">
    </div>

    </div>
   </div>

<style>
  .aa_slider {
  margin: 80px 0;
  height: 200px;
  display: block;
  perspective: 1000px;
  position: relative;
  width: 100%;
  img {
    display: inline-block;
    width: 300px;
    position: absolute;
    backface-visibility: hidden;
    //transform-origin: 50% 0;
    transition: .4s all;
  }
  img.active {
    z-index: 4; 
  }
}
</style>
<script>
  var Slider = function() {
  var total, $images, $slider, sliderWidth, increment = 120;
  var on = function() {
    $slider = $('.aa_slider');
    $images = $('.aa_slider img');
    sliderWidth = $slider.width();
    total = $images.length;
    position();
  }

  var position = function() {
    var sign, half = $('.active').index(), x = 0, z = 0, zindex,scaleX = 1.3,scaleY = 1.3, transformOrigin;
    $images.each(function(index, element) {
      scaleX = scaleY = 1;
      transformOrigin = sliderWidth / 2;
      if(index < half) {
        sign = 1;
        zindex = index + 1;
        x = sliderWidth / 2 - increment * (half - index + 1);
        z =  -increment * (half - index + 1);
      } else if(index > half) {
        sign = -1
        zindex = total - index;
        x = sliderWidth / 2 + increment * (index - half + 1);
        z =  -increment * (index - half + 1);
      } else {
        sign = 0;
        zindex = total;
        x = sliderWidth / 2;
        z = 1;
        scaleX = scaleY = 1.2;
        transformOrigin = 'initial';
      }
      $(element).css(
        {
          'transform': 'translate3d(' + calculateX(x, sign, 300) + 'px, 0,' + z + 'px) scale3d(' + scaleX + ',' + scaleY + ', 1)',
          'z-index': zindex,
          'transform-origin-x': transformOrigin
        }
      );
    });
  };

  var calculateX = function(position, sign, width) {
    switch(sign) {
      case 1:
      case 0: return position - width / 2;
      case -1: return position - width / 2;
    }
  }
  
  var imageSize = function() {
    return $slider.width() / 3;
  }
  
  var recalculateSizes = function() {
    sliderWidth = $slider.width();
    position();
  }
  
  var clickedImage = function() {
    $('.active').removeClass('active');
    $(this).addClass('active');
    position();
  }
  
  var addEvents = function() {
    $( window ).resize(recalculateSizes);
    $(document).on('click','img', clickedImage);
  }
  
  return {
    init: function() {
      on();
      addEvents();
    }
  };
}();

$(function(){
  var slider = Slider.init();
})
</script>
  
{% schema %}
{
  "name": "More Resources",
  "max_blocks":5,
  "settings": [
    {
      "type":"color",
      "id":"bg_color",
      "label":"Background Color"
    },
    {
      "type":"color",
      "id":"slide_bg_color",
      "label":"Slider Background Color"
    },
    {
      "type": "text",
      "id": "heading",
      "label":"Heading"
    },
    {
      "type": "richtext",
      "id": "desc",
      "label":"Description"
    },
    {
      "type":"text",
      "id":"btn_txt",
      "label":"Button Text"
    },
    {
      "type":"url",
      "id":"btn_url",
      "label":"Button URL"
    },
    {
      "type":"text",
      "id":"btn_txt2",
      "label":"Button Text"
    },
    {
      "type":"url",
      "id":"btn_url2",
      "label":"Button URL"
    }
  ],
  "blocks": [
    {
      "type": "Images",
      "name": "Images",
      "settings": [
        {
          "type":"text",
          "id":"custom_class",
          "label":"Custom Class"
        },
        {
          "type": "image_picker",
          "id": "main_img",
          "label":"Image"
        }
      ]
    }
  ],
  "presets": [
      {
        "name": "More Resources"
      }
    ]
}
{% endschema %}